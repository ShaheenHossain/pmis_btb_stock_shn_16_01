<?xml version="1.0" encoding="utf-8"?>
<odoo>

    <template id="portal_my_home_bhf" inherit_id="portal.portal_my_home" priority="120">
        <xpath expr="//div[hasclass('o_portal_docs')]" position="inside">
            <!-- Add this after the existing document entries -->
            <t t-call="portal.portal_docs_entry">
                <t t-set="title">Application Forms</t>
                <t t-set="url" t-value="'/my/bhf'"/>
                <t t-set="count" t-value="bhf_count"/>
                <t t-set="placeholder_count" t-value="'bhf_count'"/>
            </t>
        </xpath>
    </template>

<!--

<template id="hide_default_portal_docs" inherit_id="portal.portal_my_home" priority="130">
    &lt;!&ndash; Replace entire documents section with just your forms &ndash;&gt;
    <xpath expr="//div[hasclass('o_portal_docs')]" position="replace">
        <div class="o_portal_docs list-group">
            <t t-call="portal.portal_docs_entry">
                <t t-set="title">Application Forms</t>
                <t t-set="url" t-value="'/my/bhf'"/>
                <t t-set="count" t-value="bhf_count"/>
                <t t-set="placeholder_count" t-value="'bhf_count'"/>
            </t>
        </div>
    </xpath>
</template>-->


<!--

        <template id="hide_default_portal_docs" inherit_id="portal.portal_my_home" priority="130">
        <xpath expr="//div[hasclass('o_portal_docs')]" position="replace">
            <div class="o_portal_docs list-group">
                &lt;!&ndash; Only your Application Forms will show &ndash;&gt;
                <t t-call="portal.portal_docs_entry">
                    <t t-set="title">Application Forms</t>
                    <t t-set="url" t-value="'/my/bhf'"/>
                    <t t-set="count" t-value="bhf_count"/>
                    <t t-set="placeholder_count" t-value="'bhf_count'"/>
                </t>
            </div>
        </xpath>
    </template>

    &lt;!&ndash; Keep your existing template that adds the count &ndash;&gt;
    <template id="portal_my_home_bhf" inherit_id="portal.portal_my_home" priority="120">
        <xpath expr="//div[hasclass('o_portal_docs')]" position="inside">
            <t t-call="portal.portal_docs_entry">
                <t t-set="title">Application Forms</t>
                <t t-set="url" t-value="'/my/bhf'"/>
                <t t-set="count" t-value="bhf_count"/>
                <t t-set="placeholder_count" t-value="'bhf_count'"/>
            </t>
        </xpath>
    </template>
-->




    <!-- Application Forms List View -->
    <template id="portal_my_bhf" name="My Application Forms">
        <t t-call="portal.portal_layout">
            <t t-set="breadcrumbs_searchbar" t-value="True"/>

            <t t-call="portal.portal_searchbar">
                <t t-set="title">Application Forms</t>
            </t>

            <table class="table table-sm">
                <thead>
                    <tr>
                        <th>Reference</th>
                        <th>Name</th>
                        <th>Date</th>
                        <th>Status</th>
                        <th></th>
                    </tr>
                </thead>
                <tbody>
                    <t t-foreach="bhfs" t-as="bhf">
                        <tr>
                            <td>
                                <a t-att-href="'/my/bhf/%s' % bhf.id">
                                    <span t-esc="bhf.ticket_no"/>
                                </a>
                            </td>
                            <td><span t-esc="bhf.name"/></td>
                            <td><span t-field="bhf.create_date" t-options='{"widget": "date"}'/></td>
                            <td>
                                <span class="badge bg-success">Submitted</span>
                            </td>
                            <td class="text-end">
                                <a t-att-href="'/my/bhf/%s' % bhf.id" class="btn btn-sm btn-primary">
                                    View
                                </a>
                            </td>
                        </tr>
                    </t>
                    <t t-if="not bhfs">
                        <tr>
                            <td colspan="5" class="text-center">
                                No application forms found.
                            </td>
                        </tr>
                    </t>
                </tbody>
            </table>

            <t t-if="pager and pager['page_count'] > 1">
                <t t-call="portal.portal_pager">
                    <t t-set="pager" t-value="pager"/>
                </t>
            </t>
        </t>
    </template>

    <!-- Application Form Detail View -->
    <template id="portal_my_bhf_form" name="Application Form Detail">
        <t t-call="portal.portal_layout">
            <t t-set="breadcrumbs_searchbar" t-value="True"/>

            <div class="card">
                <div class="card-header">
                    <h3 class="mb-0">Application Form: <span t-esc="bhf.ticket_no"/></h3>
                </div>

                <div class="card-body">
                    <div class="row mb-4">
                        <div class="col-md-6">
                            <h4>Personal Information</h4>
                            <table class="table table-sm">
                                <tr>
                                    <td>Name (English):</td>
                                    <td><span t-esc="bhf.name"/></td>
                                </tr>
                                <tr>
                                    <td>Name (Bangla):</td>
                                    <td><span t-esc="bhf.name_bn"/></td>
                                </tr>
                                <tr>
                                    <td>Father's Name:</td>
                                    <td><span t-esc="bhf.father_name"/></td>
                                </tr>
                                <tr>
                                    <td>Mother's Name:</td>
                                    <td><span t-esc="bhf.mother_name"/></td>
                                </tr>
                            </table>
                        </div>

                        <div class="col-md-6">
                            <h4>Contact Information</h4>
                            <table class="table table-sm">
                                <tr>
                                    <td>Email:</td>
                                    <td><span t-esc="bhf.email"/></td>
                                </tr>
                                <tr>
                                    <td>Phone:</td>
                                    <td><span t-esc="bhf.phone_number"/></td>
                                </tr>
                                <tr>
                                    <td>Address:</td>
                                    <td><span t-esc="bhf.street"/>, <span t-esc="bhf.city"/></td>
                                </tr>
                            </table>
                        </div>
                    </div>

                    <div class="row">
                        <div class="col-12">
                            <h4>Documents</h4>
                            <div class="d-flex flex-wrap gap-3">
                                <a t-if="bhf.identity_card_front"
                                   t-att-href="'/download/bhf/%s/identity_card_front' % bhf.id"
                                   class="btn btn-outline-primary">
                                    <i class="fa fa-download me-2"></i>ID Front
                                </a>
                                <a t-if="bhf.identity_card_back"
                                   t-att-href="'/download/bhf/%s/identity_card_back' % bhf.id"
                                   class="btn btn-outline-primary">
                                    <i class="fa fa-download me-2"></i>ID Back
                                </a>
                                <a t-if="bhf.commercial_register_extract"
                                   t-att-href="'/download/bhf/%s/commercial_register_extract' % bhf.id"
                                   class="btn btn-outline-primary">
                                    <i class="fa fa-download me-2"></i>Register Extract
                                </a>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="card-footer text-end">
                    <a href="/my/bhf" class="btn btn-secondary">
                        <i class="fa fa-arrow-left me-2"></i>Back to List
                    </a>
                </div>
            </div>
        </t>
    </template>
</odoo>